<!-- /index.html — Brand one-word beside logo, pro banner, hero-only Login, centered map, bold footer nav -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>CarribCareerHub</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="canonical" href="https://carribcareerhub.site/">

  <style>
    html, body { height: 100%; }
    body { overflow-x: hidden; -webkit-text-size-adjust: 100%; }

    /* ===== Highlight Banner (brand-aligned) ===== */
    .highlight-banner-wrap {
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
      color: #fff;
    }
    .highlight-banner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 10px 20px;
      display: flex; align-items: center; justify-content: center;
      text-align: center; font-weight: 900; letter-spacing: .2px; line-height: 1.2;
      text-wrap: balance;
    }

    /* ===== Header: logo + single-word brand side-by-side ===== */
    .header {
      max-width: 1100px; margin: 16px auto 0; padding: 0 20px;
      display: flex; align-items: center; justify-content: center; gap: 14px;
    }
    .brand {
      display: flex; align-items: center; justify-content: center; gap: 14px;
      flex-wrap: nowrap;
    }
    .brand .logo {
      width: 104px; height: 104px; border-radius: 14px; object-fit: cover; box-shadow: var(--shadow);
      flex: 0 0 auto;
    }
    .brand-name {
      font-size: 26px; font-weight: 900; letter-spacing: 4px;
      white-space: nowrap; /* keep in one line */
    }
    /* no header nav login; CTA lives in hero */
    .nav { display: none !important; }

    /* ===== Panel & layout ===== */
    .panel { max-width: 1100px; margin: 16px auto 40px; padding: 24px; }
    .panel-content { display: grid; grid-template-columns: 1.1fr .9fr; gap: 24px; align-items: start; }
    @media (max-width: 768px) { .panel-content { grid-template-columns: 1fr; } }

    /* ===== Hero: keep Login + Learn More; remove search/buttons ===== */
    #searchForm, .actions { display: none !important; }
    .hero-title { margin-top: 6px; }
    .hero-cta { margin-top: 18px; display: flex; gap: 14px; flex-wrap: wrap; }
    .btn { border: none; border-radius: 12px; padding: 14px 22px; font-weight: 800; font-size: 16px; cursor: pointer; }
    .btn-primary { color: #fff; background: linear-gradient(90deg, var(--brand), var(--brand-2)); box-shadow: var(--shadow); }
    .btn-ghost { background: #fff; border: 1px solid #E4ECFF; color: var(--ink); }

    /* ===== Map: centered & fitted ===== */
    .map-wrap {
      width: 100%; max-width: 900px; margin-inline: auto;
      background: #fff; border: 1px solid #e4ecff; border-radius: 14px; box-shadow: var(--shadow);
      overflow: hidden;
    }
    .map-aspect { position: relative; width: 100%; }
    .map-img { display: block; width: 100%; height: auto; object-fit: contain; aspect-ratio: 16 / 9; }
    @supports not (aspect-ratio: 1 / 1) {
      .map-aspect::before { content: ""; display: block; padding-top: 56.25%; }
      .map-aspect > picture, .map-aspect > img { position: absolute; inset: 0; width: 100%; height: 100%; }
      .map-aspect img { object-fit: contain; }
    }

    /* ===== Jobs list (kept) ===== */
    .jobs-list { margin-top: 2rem; }
    .job-card { border: 1px solid #ddd; padding: 1rem; margin-bottom: 1rem; border-radius: 6px; transition: box-shadow .2s; background: #fff; }
    .job-card:hover { box-shadow: 0 3px 8px rgba(0,0,0,.1); }
    .job-title { font-size: 1.2rem; font-weight: bold; margin: 0 0 6px; }
    .job-company { color: #555; font-weight: 600; }
    .job-location { font-style: italic; color: #0077b6; }
    .load-more {
      display: block; margin: 1rem auto; padding: .8rem 1.5rem;
      font-size: 1rem; font-weight: bold; border: none; border-radius: 6px;
      background: #0077b6; color: #fff; cursor: pointer; transition: background .2s;
    }
    .load-more:hover { background: #0096c7; }

    /* ===== Footer: bold, clickable nav bar ===== */
    .footer { max-width: 1100px; margin: 30px auto 40px; padding: 0 20px; }
    .footer-nav {
      display: flex; justify-content: center; align-items: center; gap: 14px; flex-wrap: wrap;
      background: #fff; border: 1px solid #e4ecff; border-radius: 14px; box-shadow: var(--shadow);
      padding: 12px;
    }
    .footer-nav a {
      display: inline-block; padding: 10px 14px; border-radius: 10px;
      font-weight: 800; color: var(--ink); text-decoration: none; border: 1px solid transparent;
    }
    .footer-nav a:focus, .footer-nav a:hover { border-color: #e4ecff; background: #f8fbff; }
    .copy { text-align: center; margin-top: 10px; color: var(--muted); }

    /* ===== Mobile tweaks ===== */
    @media (max-width: 768px) {
      .brand .logo { width: 96px; height: 96px; } /* slightly smaller for fit */
      .brand-name { font-size: 22px; letter-spacing: 3px; }
      .lede { font-size: 15px; }
    }
  </style>
</head>
<body>

  <!-- Banner -->
  <div class="highlight-banner-wrap">
    <div class="highlight-banner">
      💼 Unlock Caribbean Opportunities 🌴 — Jobs across Jamaica 🇯🇲, Barbados 🇧🇧 & Trinidad 🇹🇹
    </div>
  </div>

  <!-- Header: logo + one-word brand -->
  <header class="header">
    <div class="brand">
      <picture>
        <source srcset="./assets/logo.svg" type="image/svg+xml">
        <img src="./assets/logo.png" alt="CarribCareerHub logo" class="logo" width="208" height="208" />
      </picture>
      <span class="brand-name">CARRIBCAREERHUB</span>
    </div>
  </header>

  <main class="panel">
    <div class="panel-content">
      <section>
        <h1 class="hero-title">Find Your Dream Job</h1>
        <p class="lede">
          At <strong>CarribCareerHub</strong>, your career journey truly matters.
          Whether you’re starting out, changing paths, or chasing new ambitions,
          we’re here to guide you toward opportunities that fit your unique goals.
        </p>
        <p class="employer-callout">
          <strong>Employers:</strong> Need the right people for your business?
          Post your job today and let us connect you with skilled talent across Jamaica,
          Barbados, Trinidad, and the wider Caribbean.
        </p>

        <!-- Hero CTAs -->
        <div class="hero-cta">
          <button id="loginHero" class="btn btn-primary">Login / Sign Up</button>
          <button id="learnMoreBtn" class="btn btn-ghost" aria-label="Jump to Latest Jobs">Learn more</button>
        </div>

        <!-- Latest Jobs (kept) -->
        <div class="jobs-list" id="jobsList">
          <h2>Latest Jobs</h2>
          <div id="jobsContainer">Loading jobs...</div>
          <button id="loadMoreBtn" class="load-more" style="display:none;">Load More</button>
        </div>
      </section>

      <!-- Centered, fitted map -->
      <aside class="map-wrap">
        <div class="map-aspect">
          <picture>
            <source srcset="./assets/map.svg" type="image/svg+xml">
            <img src="./assets/map.png" class="map-img" alt="Caribbean map" loading="lazy" width="1600" height="900" />
          </picture>
        </div>
      </aside>
    </div>
  </main>

  <!-- Footer: bold nav bar -->
  <footer class="footer">
    <nav class="footer-nav" aria-label="Footer">
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
      <a href="privacy.html">Privacy</a>
      <a href="terms.html">Terms</a>
    </nav>
    <div class="copy">© 2025 CarribCareerHub</div>
  </footer>

  <!-- Supabase client -->
  <script defer src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script>
    // Login route
    const LOGIN_URL = "login.html";

    // CTAs
    window.addEventListener('DOMContentLoaded', () => {
      document.getElementById('loginHero').addEventListener('click', () => { window.location.href = LOGIN_URL; });
      document.getElementById('learnMoreBtn').addEventListener('click', () => {
        document.getElementById('jobsList')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });

    // Supabase init for Latest Jobs
    window.addEventListener('load', () => {
      const supabaseUrl = "https://fpytvfhynleaivkvuedt.supabase.co";
      const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZweXR2Zmh5bmxlYWl2a3Z1ZWR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2NzU1OTAsImV4cCI6MjA3MTI1MTU5MH0.Q7UHLIA_3_o7zCdV-IOthWOYGVVlINDXjp1uF4sdBRk";
      const supabaseClient = window.supabase.createClient(supabaseUrl, supabaseKey);

      let currentPage = 0;
      const pageSize = 5;
      const jobsContainer = document.getElementById('jobsContainer');
      const loadMoreBtn = document.getElementById('loadMoreBtn');

      async function loadJobs(reset = false) {
        if (reset) {
          currentPage = 0;
          jobsContainer.textContent = "Loading jobs...";
        }
        const from = currentPage * pageSize;
        const to = from + pageSize - 1;

        const { data, error } = await supabaseClient
          .from('jobs')
          .select('*')
          .order('created_at', { ascending: false })
          .range(from, to);

        if (error) {
          console.error(error);
          jobsContainer.textContent = "❌ Failed to load jobs.";
          loadMoreBtn.style.display = "none";
          return;
        }

        if (reset) jobsContainer.innerHTML = "";
        if (data.length === 0 && reset) {
          jobsContainer.textContent = "No jobs available yet.";
          loadMoreBtn.style.display = "none";
          return;
        }

        data.forEach(job => {
          const card = document.createElement('div');
          card.className = "job-card";
          card.innerHTML = `
            <div class="job-title">${job.title || ""}</div>
            <div class="job-company">${job.company || ""}</div>
            <div class="job-location">${job.location || ""}</div>
            <p>${job.description ? job.description : ""}</p>
          `;
          jobsContainer.appendChild(card);
        });

        loadMoreBtn.style.display = data.length === pageSize ? "block" : "none";
      }

      loadJobs(true);
      loadMoreBtn.addEventListener('click', () => { currentPage++; loadJobs(); });

      supabaseClient
        .channel('jobs-changes')
        .on('postgres_changes', { event: '*', schema: 'public', table: 'jobs' }, () => loadJobs(true))
        .subscribe();
    });
  </script>
</body>
</html>
